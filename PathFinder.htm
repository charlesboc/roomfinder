<!DOCTYPE html>
<html>
<head>
<style type="text/css">
body {
	margin: 0;
}
#map {
	position: absolute;
	-webkit-transform: perspective(2000) rotateX(30deg) scale(0.7) translate(-300px, -800px);
}
.spot {
	position: absolute;
	width: 5px;
	height: 5px;
	background-color: red;
}
.line {
	position: absolute;
	width: 3px;
	height: 3px;
	background-color: red;
}
</style>
</head>
<body>
<div id="map">
	<img id="topFloor" src=""></src>
	<img id="bottomFloor" src=""></src>
</div>
<script type="text/javascript" src="dijkstra-master\graph.js"></script>
<script type="text/javascript">

var floors = {
	"2": { img: "map_73_20150917154500Geneva 2nd Floor.jpg" },
	"3": { img: "map_74_20150917154510Geneva 3rd Floor.jpg" },
	"4": { img: "map_72_20150917154447Geneva 4th Floor.jpg" },
	"5": { img: "map_78_20150919075554Geneva 5th Floor.jpg" }
};



var map = {"2-R02,01":{"2-#7":28},"2-R02,02":{"2-#8":29},"2-R02,03":{"2-#13":30},"2-R02,12":{"2-#38":28},"2-R02,13":{"2-#37":29},"2-R02,15":{"2-#35":20},"2-R02,17":{"2-#32":20},"2-#7":{"2-#8":38,"2-R02,01":28},"2-#8":{"2-#9":58,"2-#7":38,"2-R02,02":29},"2-#9":{"2-#10":42,"2-#8":58,"2-#14":414},"2-#10":{"2-#11":56,"2-#9":42},"2-#11":{"2-#12":42,"2-#10":56},"2-#12":{"2-#13":62,"2-#11":42,"2-#16":414},"2-#13":{"2-#12":62,"2-R02,03":30},"2-#14":{"2-#15":82,"2-#9":414},"2-#15":{"2-#16":58,"2-#14":82,"2-#24":48},"2-#16":{"2-#17":42,"2-#15":58,"2-#12":414},"2-#17":{"2-#16":42,"2-#18":48},"2-#18":{"2-#19":82,"2-#24":100,"2-#17":48},"2-#19":{"2-#18":82,"2-#41":66},"2-#20":{"2-#26":76,"2-#21":294,"2-#41":108},"2-#21":{"2-#32":82,"2-#33":186,"2-#20":294},"2-#22":{"2-#30":66,"2-#40":58,"2-#23":98},"2-#23":{"2-S02A":102,"2-#22":98,"2-#42":10},"2-#24":{"2-#18":100,"2-#42":66,"2-#15":48},"2-S02A":{"2-#23":102,"3-S02A":500},"2-#26":{"2-#20":76,"2-#30":40,"2-#27":42},"2-#27":{"2-#28":50,"2-#26":42},"2-#28":{"2-#27":50,"2-S02B":66},"2-S02B":{"2-#28":66,"3-S02B":500},"2-#30":{"2-#26":40,"2-#22":66,"2-E":48},"2-E":{"2-#30":48,"3-E":500,"4-E":500,"5-E":500},"2-#32":{"2-#21":82,"2-R02,17":20},"2-#33":{"2-#21":186,"2-#34":48},"2-#34":{"2-#35":42,"2-#33":48},"2-#35":{"2-#34":42,"2-#36":44,"2-R02,15":20},"2-#36":{"2-#35":44,"2-#37":52},"2-#37":{"2-R02,13":29,"2-#36":52,"2-#38":36},"2-#38":{"2-R02,12":28,"2-#37":36,"2-#39":100},"2-#39":{"2-#40":90,"2-#38":100},"2-#40":{"2-#39":90,"2-#22":58},"2-#41":{"2-#42":182,"2-#20":108,"2-#19":66},"2-#42":{"2-#41":182,"2-#23":10,"2-#24":66},"3-R03,01":{"3-#51":28},"3-R03,02":{"3-#52":29},"3-R03,03":{"3-#55":30},"3-R03,09":{"3-#70":27},"3-R03,10":{"3-#68":26},"3-R03,11":{"3-#67":25},"3-R03,13":{"3-#66":30},"3-R03,14":{"3-#64":18},"3-#51":{"3-#52":38,"3-R03,01":28},"3-#52":{"3-#53":58,"3-#51":38,"3-R03,02":29},"3-#53":{"3-#54":146,"3-#52":58,"3-#56":414},"3-#54":{"3-#55":56,"3-#53":146,"3-#58":414},"3-#55":{"3-#54":56,"3-R03,03":30},"3-#56":{"3-#57":62,"3-#53":414},"3-#57":{"3-#58":84,"3-#56":62,"3-#75":48},"3-#58":{"3-#59":36,"3-#57":84,"3-#54":414},"3-#59":{"3-#58":36,"3-#60":48},"3-#60":{"3-#61":82,"3-#73":86,"3-#59":48},"3-#61":{"3-#60":82,"3-#62":174},"3-#62":{"3-#78":76,"3-#63":294,"3-#61":174},"3-#63":{"3-#65":274,"3-#64":14,"3-#62":294},"3-#64":{"3-R03,14":18,"3-#63":14},"3-#65":{"3-#63":274,"3-#66":76},"3-#66":{"3-R03,13":30,"3-#65":76,"3-#67":26},"3-#67":{"3-R03,11":25,"3-#66":26,"3-#68":128},"3-#68":{"3-R03,10":26,"3-#67":128,"3-#69":86},"3-#69":{"3-#71":92,"3-#68":86,"3-#70":28},"3-#70":{"3-R03,09":27,"3-#69":28},"3-#71":{"3-#69":92,"3-#72":22},"3-#72":{"3-#84":66,"3-#71":22},"3-#73":{"3-#60":86,"3-#75":34,"3-#74":76},"3-#74":{"3-S03A":116,"3-#73":76},"3-#75":{"3-#73":34,"3-S02A":80,"3-#57":48},"3-S02A":{"3-#75":80,"2-S02A":500},"3-S03A":{"3-#74":116,"4-S03A":500},"3-#78":{"3-#62":76,"3-#84":40,"3-#79":42},"3-#79":{"3-#82":28,"3-#80":50,"3-#78":42},"3-#80":{"3-#79":50,"3-S03B":66},"3-S03B":{"3-#80":66,"4-S03B":500},"3-#82":{"3-#79":28,"3-S02B":64},"3-S02B":{"3-#82":64,"2-S02B":500},"3-#84":{"3-#78":40,"3-#72":66,"3-E":48},"3-E":{"3-#84":48,"2-E":500,"4-E":500,"5-E":500},"4-R04,01":{"4-#91":34},"4-R04,02":{"4-#92":33},"4-R04,03":{"4-#94":35},"4-R04,09":{"4-#111":28},"4-R04,11":{"4-#120":20},"4-#91":{"4-#92":36,"4-R04,01":34},"4-#92":{"4-#93":62,"4-#91":36,"4-R04,02":33},"4-#93":{"4-#95":146,"4-#92":62,"4-#96":416},"4-#94":{"4-#95":62,"4-R04,03":35},"4-#95":{"4-#94":62,"4-#93":146,"4-#98":416},"4-#96":{"4-#97":62,"4-#93":416},"4-#97":{"4-#98":84,"4-#96":62,"4-#101":56},"4-#98":{"4-#99":18,"4-#97":84,"4-#95":416},"4-#99":{"4-#98":18,"4-#100":56},"4-#100":{"4-#103":106,"4-#101":102,"4-#99":56},"4-#101":{"4-#100":102,"4-S03A":70,"4-#97":56},"4-S03A":{"4-#101":70,"3-S03A":500},"4-#103":{"4-#100":106,"4-#104":186},"4-#104":{"4-#114":72,"4-#105":296,"4-#103":186},"4-#105":{"4-#106":178,"4-#104":296},"4-#106":{"4-#105":178,"4-#107":74},"4-#107":{"4-#120":48,"4-#106":74},"4-#108":{"4-#120":56,"4-#109":182},"4-#109":{"4-#110":100,"4-#108":182},"4-#110":{"4-#109":100,"4-#111":40},"4-#111":{"4-#112":64,"4-R04,09":28,"4-#110":40},"4-#112":{"4-#114":46,"4-#111":64,"4-E":52},"4-E":{"4-#112":52,"2-E":500,"3-E":500,"5-E":500},"4-#114":{"4-#104":72,"4-#112":46,"4-#115":42},"4-#115":{"4-#117":28,"4-#116":58,"4-#114":42},"4-#116":{"4-#115":58,"4-S05B":71},"4-#117":{"4-#115":28,"4-S03B":72},"4-S03B":{"4-#117":72,"3-S03B":500},"4-S05B":{"4-#116":71,"5-S05B":500},"4-#120":{"4-#107":48,"4-#108":56,"4-R04,11":20},"5-R05??":{"5-#126":28},"5-E":{"5-#124":64,"2-E":500,"3-E":500,"4-E":500},"5-#124":{"5-#127":54,"5-#125":84,"5-E":64},"5-#125":{"5-#124":84,"5-#126":142},"5-#126":{"5-R05??":230,"5-#125":142},"5-#127":{"5-#124":54,"5-#128":62},"5-#128":{"5-#129":42,"5-#127":62},"5-#129":{"5-#128":42,"5-S05B":87},"5-S05B":{"5-#129":87,"4-S05B":500}}; var nodes = {"2-R02,01":{"floor":2,"x":110,"y":94},"2-R02,02":{"floor":2,"x":109,"y":132},"2-R02,03":{"floor":2,"x":108,"y":392},"2-R02,12":{"floor":2,"x":932,"y":154},"2-R02,13":{"floor":2,"x":968,"y":153},"2-R02,15":{"floor":2,"x":1040,"y":226},"2-R02,17":{"floor":2,"x":1088,"y":536},"2-#7":{"floor":2,"x":138,"y":94},"2-#8":{"floor":2,"x":138,"y":132},"2-#9":{"floor":2,"x":138,"y":190},"2-#10":{"floor":2,"x":138,"y":232},"2-#11":{"floor":2,"x":138,"y":288},"2-#12":{"floor":2,"x":138,"y":330},"2-#13":{"floor":2,"x":138,"y":392},"2-#14":{"floor":2,"x":552,"y":190},"2-#15":{"floor":2,"x":552,"y":272},"2-#16":{"floor":2,"x":552,"y":330},"2-#17":{"floor":2,"x":552,"y":372},"2-#18":{"floor":2,"x":600,"y":372},"2-#19":{"floor":2,"x":600,"y":454},"2-#20":{"floor":2,"x":774,"y":454},"2-#21":{"floor":2,"x":1068,"y":454},"2-#22":{"floor":2,"x":774,"y":272},"2-#23":{"floor":2,"x":676,"y":272},"2-#24":{"floor":2,"x":600,"y":272},"2-S02A":{"floor":2,"x":676,"y":170},"2-#26":{"floor":2,"x":774,"y":378},"2-#27":{"floor":2,"x":816,"y":378},"2-#28":{"floor":2,"x":816,"y":328},"2-S02B":{"floor":2,"x":882,"y":328},"2-#30":{"floor":2,"x":774,"y":338},"2-E":{"floor":2,"x":726,"y":338},"2-#32":{"floor":2,"x":1068,"y":536},"2-#33":{"floor":2,"x":1068,"y":268},"2-#34":{"floor":2,"x":1020,"y":268},"2-#35":{"floor":2,"x":1020,"y":226},"2-#36":{"floor":2,"x":1020,"y":182},"2-#37":{"floor":2,"x":968,"y":182},"2-#38":{"floor":2,"x":932,"y":182},"2-#39":{"floor":2,"x":832,"y":182},"2-#40":{"floor":2,"x":832,"y":272},"2-#41":{"floor":2,"x":666,"y":454},"2-#42":{"floor":2,"x":666,"y":272},"3-R03,01":{"floor":3,"x":110,"y":94},"3-R03,02":{"floor":3,"x":109,"y":132},"3-R03,03":{"floor":3,"x":108,"y":392},"3-R03,09":{"floor":3,"x":724,"y":153},"3-R03,10":{"floor":3,"x":838,"y":154},"3-R03,11":{"floor":3,"x":966,"y":155},"3-R03,13":{"floor":3,"x":992,"y":210},"3-R03,14":{"floor":3,"x":1082,"y":472},"3-#51":{"floor":3,"x":138,"y":94},"3-#52":{"floor":3,"x":138,"y":132},"3-#53":{"floor":3,"x":138,"y":190},"3-#54":{"floor":3,"x":138,"y":336},"3-#55":{"floor":3,"x":138,"y":392},"3-#56":{"floor":3,"x":552,"y":190},"3-#57":{"floor":3,"x":552,"y":252},"3-#58":{"floor":3,"x":552,"y":336},"3-#59":{"floor":3,"x":552,"y":372},"3-#60":{"floor":3,"x":600,"y":372},"3-#61":{"floor":3,"x":600,"y":454},"3-#62":{"floor":3,"x":774,"y":454},"3-#63":{"floor":3,"x":1068,"y":454},"3-#64":{"floor":3,"x":1082,"y":454},"3-#65":{"floor":3,"x":1068,"y":180},"3-#66":{"floor":3,"x":992,"y":180},"3-#67":{"floor":3,"x":966,"y":180},"3-#68":{"floor":3,"x":838,"y":180},"3-#69":{"floor":3,"x":752,"y":180},"3-#70":{"floor":3,"x":724,"y":180},"3-#71":{"floor":3,"x":752,"y":272},"3-#72":{"floor":3,"x":774,"y":272},"3-#73":{"floor":3,"x":600,"y":286},"3-#74":{"floor":3,"x":676,"y":286},"3-#75":{"floor":3,"x":600,"y":252},"3-S02A":{"floor":3,"x":600,"y":172},"3-S03A":{"floor":3,"x":676,"y":170},"3-#78":{"floor":3,"x":774,"y":378},"3-#79":{"floor":3,"x":816,"y":378},"3-#80":{"floor":3,"x":816,"y":328},"3-S03B":{"floor":3,"x":882,"y":328},"3-#82":{"floor":3,"x":816,"y":406},"3-S02B":{"floor":3,"x":880,"y":406},"3-#84":{"floor":3,"x":774,"y":338},"3-E":{"floor":3,"x":726,"y":338},"4-R04,01":{"floor":4,"x":108,"y":100},"4-R04,02":{"floor":4,"x":109,"y":136},"4-R04,03":{"floor":4,"x":107,"y":406},"4-R04,09":{"floor":4,"x":800,"y":258},"4-R04,11":{"floor":4,"x":1042,"y":242},"4-#91":{"floor":4,"x":142,"y":100},"4-#92":{"floor":4,"x":142,"y":136},"4-#93":{"floor":4,"x":142,"y":198},"4-#94":{"floor":4,"x":142,"y":406},"4-#95":{"floor":4,"x":142,"y":344},"4-#96":{"floor":4,"x":558,"y":198},"4-#97":{"floor":4,"x":558,"y":260},"4-#98":{"floor":4,"x":558,"y":344},"4-#99":{"floor":4,"x":558,"y":362},"4-#100":{"floor":4,"x":614,"y":362},"4-#101":{"floor":4,"x":614,"y":260},"4-S03A":{"floor":4,"x":614,"y":190},"4-#103":{"floor":4,"x":614,"y":468},"4-#104":{"floor":4,"x":800,"y":468},"4-#105":{"floor":4,"x":1096,"y":468},"4-#106":{"floor":4,"x":1096,"y":290},"4-#107":{"floor":4,"x":1022,"y":290},"4-#108":{"floor":4,"x":1022,"y":186},"4-#109":{"floor":4,"x":840,"y":186},"4-#110":{"floor":4,"x":840,"y":286},"4-#111":{"floor":4,"x":800,"y":286},"4-#112":{"floor":4,"x":800,"y":350},"4-E":{"floor":4,"x":748,"y":350},"4-#114":{"floor":4,"x":800,"y":396},"4-#115":{"floor":4,"x":842,"y":396},"4-#116":{"floor":4,"x":842,"y":338},"4-#117":{"floor":4,"x":842,"y":424},"4-S03B":{"floor":4,"x":914,"y":424},"4-S05B":{"floor":4,"x":913,"y":338},"4-#120":{"floor":4,"x":1022,"y":242},"5-R05??":{"floor":5,"x":1234,"y":366},"5-E":{"floor":5,"x":1028,"y":478},"5-#124":{"floor":5,"x":1092,"y":478},"5-#125":{"floor":5,"x":1092,"y":394},"5-#126":{"floor":5,"x":1234,"y":394},"5-#127":{"floor":5,"x":1092,"y":532},"5-#128":{"floor":5,"x":1154,"y":532},"5-#129":{"floor":5,"x":1154,"y":574},"5-S05B":{"floor":5,"x":1241,"y":574}};




var graph = new Graph(map);

var path = graph.findShortestPath("3-R03,01", "5-S05B");

console.log(path);

if (path && path.length >= 2) {

	var startFloor = nodes[path[0]].floor;
	var endFloor = nodes[path[path.length - 1]].floor;

	console.log(startFloor);
	console.log(endFloor);

	document.getElementById("topFloor").src = floors[Math.max(startFloor, endFloor)].img;
	document.getElementById("bottomFloor").src = floors[Math.min(startFloor, endFloor)].img;

	setTimeout(function () {
		var prev = null;
		for (var i = 0; i < path.length; i++) {
			var x = nodes[path[i]].x;
			var y = nodes[path[i]].y;
			var floor = nodes[path[i]].floor;
			
			if (prev != null && prev.floor == floor) {
				if (prev.y == y) {
					var line = document.createElement('div');
					line.className = 'line';
					line.style.top = (y - 1 + (floor == Math.min(startFloor, endFloor) ? document.getElementById('topFloor').clientHeight : 0)) + 'px';
					line.style.left = Math.min(x, prev.x) + 'px';
					line.style.width = (Math.abs(x - prev.x) + 1) + 'px';
					document.getElementById('map').appendChild(line);
				}
				else if (prev.x == x) {
					var line = document.createElement('div');
					line.className = 'line';
					line.style.top = (Math.min(y, prev.y) + (floor == Math.min(startFloor, endFloor) ? document.getElementById('topFloor').clientHeight : 0)) + 'px';
					line.style.left = (x - 1) + 'px';
					line.style.height = (Math.abs(y - prev.y) + 1) + 'px';
					document.getElementById('map').appendChild(line);
				}
			}
			
			var spot = document.createElement('div');
			spot.className = 'spot';
			spot.style.top = ((y - 2) + (floor == Math.min(startFloor, endFloor) ? document.getElementById('topFloor').clientHeight : 0)) + 'px';
			spot.style.left = (x - 2) + 'px';
			document.getElementById('map').appendChild(spot);
			
			prev = nodes[path[i]];
		}
	}, 100);

}

</script>
</body>
</html>